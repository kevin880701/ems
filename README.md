# API 資料整理

## 查詢資料

### 主要資訊
| 欄位名稱 | API key | 備註 |
| --- | --- | --- |
| 指定模式已執行時間 | Req_And_Info_3044 | 請平台搭配此值去計算開始到目前兩個時間點的差值即為可滿足此欄位需求 |
| 指定模式累積供電 | L1_3144 | 請平台搭配此值去計算開始到目前兩個時間點的差值即為可滿足此欄位需求 |
| 圖表標題&副標題 |  |  |
| 電池電量 | hb_3066 | 單位：% |
| 市電、綠電、儲能櫃電量 |  |  |
| 上此使用模式的時間 | Req_And_Info_3044 | 請平台自行計數切換到目前特定模式後使用的時間 |
| 上此使用模式的累計供電 | L1_3144 | 請平台搭配此值去計算開始到目前兩個時間點的差值即為可滿足此欄位需求 |
| 電池優先模式的剩餘電量（％） | hb_3066 | 單位：% |
| 電池優先模式的剩餘電量（度） | hb_3445、hb_3455、hb_3489、hb_3499、hb_3533、hb_3543、hb_3577、hb_3587 | 根據電池包數量相加取得整體續航力數值(單位:度)<br>公式：`(hb_3445*hb_3455)/1000` (第一節電池) |

### 模式資訊
| **查詢資料** | 點位名稱 | 備註 |
| --- | --- | --- |
| 當前模式 | Req_And_Info_3044 | 0：自發自用; 1：削峰填谷; 2：電池優先 |
| **自發自用模式** |  |  |
| 充電開始時間 | Req_And_Info_3317 |  |
| 充電結束時間 | Req_And_Info_3318 |  |
| **削峰填谷模式** |  |  |
| 充電開始結束+放電開始結束時間 | Req_And_Info_3160 | 格式：`HHMMHHMM` |
| 第二組充電開始結束+放電開始結束時間 | Req_And_Info_3168 | 設定為 `00000000` 代表沒使用到 |
| **電池優先模式** |  |  |

---

## 發送資料

### 自發自用模式
| 欄位名稱 | BODY 的 key | 備註 |
| --- | --- | --- |
| 設定操作模式 | M31 |  |
| 是否啟用 | M32 | 1 為啟用; 0 為停用 |
| 充電開始時間 | M33 | 24 小時制 |
| 充電結束時間 | M34 | 24 小時制 |
| 設定充電到多少 | M35 | 範圍：0 ~ 100% |

### 削峰填谷模式
| 欄位名稱 | BODY 的 key | 備註 |
| --- | --- | --- |
| 第一組時間設定操作模式 | M11 |  |
| 第一組時間 | M12 | 格式：`HHMMHHMM`<br>充電開始~結束，放電開始~結束 |
| 第二組時間設定操作模式 | M21 | 設定為 `00000000` 代表沒使用到 |
| 第二組時間 | M22 | 格式：`HHMMHHMM`<br>充電開始~結束，放電開始~結束 |

### 電池優先模式
| 欄位名稱 | BODY 的 key | 備註 |
| --- | --- | --- |
| 設定操作模式 | S8 |  |


















